#!/bin/bash
# =========================================
# Dispatcher pre-commit
# Exécute tous les sous-scripts dans pre-commit.d/
# =========================================

set -e

HOOK_DIR="$(dirname "$0")/pre-commit.d"

echo "[HOOK] Lancement des sous-hooks pre-commit..."

for script in "$HOOK_DIR/*.sh"; do
    if [ -x "$script" ]; then
        echo "→ Exécution de $(basename "$script")"
        "$script"
    else
        echo "⚠️  Script non exécutable : $(basename "$script")"
    fi
done

echo "✔️  Tous les hooks pre-commit ont été exécutés avec succès."
exit 0
